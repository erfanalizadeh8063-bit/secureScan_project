## v0.9.0-beta — 2025-11-02

Release type: beta

Highlights
- API base enforcement: frontend now requires VITE_API_BASE at build time. The previous localhost/dev fallback was removed to prevent accidental baking of dev URLs into production bundles.
- Nginx runtime: frontend uses a multi-stage Docker build (Node build stage + nginx runtime). The nginx config includes SPA fallback and gzip compression and the runtime listens on `$PORT` (Render-friendly).
- Security headers: nginx runtime sets HSTS, a focused Content-Security-Policy (allows connect-src to the configured backend), X-Frame-Options (DENY), X-Content-Type-Options (nosniff), and Referrer-Policy.
- Smoke & CI guard rails: added `secureScan_Front/smoke.sh` (runtime smoke check) and `.github/workflows/bundle-check.yml` which builds the frontend with a production API base and fails if the backend URL is not present in the produced `dist` artifacts.
- Backend hardening: improved CORS parsing (supports comma-separated origins, trims entries and registers each origin explicitly) and reduced JSON request body limit to 5 MB to reduce attack surface and memory spikes.

Other improvements
- CI workflow improvements: the bundle-check job now runs on Node 18 and 20, uses caching for node modules and npm cache, and uploads the built `dist` as an artifact on failure to speed debugging.

Migration / Deploy notes
- On Render (or similar PaaS) set `VITE_API_BASE` as a build-time environment variable (NOT a runtime env). Clear build cache before deploy to ensure the new value is baked into the build.
- After deploy, run `secureScan_Front/smoke.sh` against the production frontend and backend to validate health.

TODO
- Container scanning: integrate an image scanner (e.g., Trivy) into CI and run it after build to detect OS/CVE issues before merging or deploying.

Changelog references (key files changed)
- `secureScan_Front/src/lib/api.ts` — require `VITE_API_BASE` at build time
- `secureScan_Front/Dockerfile.frontend` — multi-stage build + nginx runtime
- `secureScan_Front/nginx/default.conf.template` — SPA fallback, gzip, security headers
- `secureScan_Front/smoke.sh` — small runtime smoke test
- `.github/workflows/bundle-check.yml` — CI bundle-check & matrix/caching/artifact upload
- `secureScan_Back/src/main.rs` — CORS parsing and JSON body size limit

Contact
If you see issues with the bake (wrong API URL in build) or need the URL rotated, open a PR or a bug report (use `.github/ISSUE_TEMPLATE/bug_report.md`).
